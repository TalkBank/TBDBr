<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Query CQL — getCQL • TBDBr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Query CQL — getCQL"><meta property="og:description" content='Queryting by "CQL" (Corpus Query Language) lets us search for patterns in the selected transcripts. We construct a CQL query by specifying a search pattern of words, lemmas, and parts of speech.
The "cqlArr" parameter specifies a pattern to search for in text.  The pattern is built up by appending components that are one of three types:
Exact word match (type="word").
Match any form of a word (type="lemma").
Or part of speech (type="pos").


Along with type, components have another value, "freq", specifying how many times an item should appear at that location.
Appear once at that location (freq="once").
Appear zero or more times at location (freq="zeroPlus").
Appear one or more times at location (freq="onePlus").


We append these two-part (type/freq) components together to search for patterns across corpora.
Some examples:
To find all instances of exactly "go home":
cqlArr=list(
list(type="word", item="go", freq="once"),
list(type="word", item="home", freq="once"))


This matches all utterances containing:
"go home"
To find all instances of any form of "go" followed by "home", we use type="lemma" for "go":
cqlArr=list(
list(type="lemma", item="go", freq="once"),
list(type="word", item="home", freq="once"))


This matches all utterances containing:
"go home"
"goes home"
"went home"
"going home"
To find all instances of a subject pronoun, followd by any form of "go", followed by one or more adverbs, followed by "home":
cqlArr=list(
list(type="pos", item="pro:sub", freq="once"),
list(type="lemma", item="go", freq="once"),
list(type="pos", item="adv", freq="onePlus"),
list(type="word", item="home", freq="once"))


This matches all utterances containing:
"they went back home"
"they go back home"
"he went back home"
"we went back home"
others...
There are many "item" values for part of speech (type="pos").  See the CHAT manual or the CQL tab on TalkBankDB (https://talkbank.org/DB) for legal part-of-speech codes.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">TBDBr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/example-queries.html">Example Queries</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/TalkBank/TalkBankDB-R/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Query CQL</h1>
    <small class="dont-index">Source: <a href="https://github.com/TalkBank/TalkBankDB-R/blob/HEAD/R/query_functions.R" class="external-link"><code>R/query_functions.R</code></a></small>
    <div class="hidden name"><code>getCQL.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Queryting by "CQL" (Corpus Query Language) lets us search for patterns in the selected transcripts. We construct a CQL query by specifying a search pattern of words, lemmas, and parts of speech.</p>
<p>The "cqlArr" parameter specifies a pattern to search for in text.  The pattern is built up by appending components that are one of three types:</p><ul><li><p>Exact word match (type="word").</p></li>
<li><p>Match any form of a word (type="lemma").</p></li>
<li><p>Or part of speech (type="pos").</p></li>
</ul><p>Along with type, components have another value, "freq", specifying how many times an item should appear at that location.</p><ul><li><p>Appear once at that location (freq="once").</p></li>
<li><p>Appear zero or more times at location (freq="zeroPlus").</p></li>
<li><p>Appear one or more times at location (freq="onePlus").</p></li>
</ul><p>We append these two-part (type/freq) components together to search for patterns across corpora.</p>
<p>Some examples:</p><ul><li><p>To find all instances of exactly "go home":
cqlArr=list(
list(type="word", item="go", freq="once"),
list(type="word", item="home", freq="once"))</p></li>
</ul><p>This matches all utterances containing:
"go home"</p><ul><li><p>To find all instances of any form of "go" followed by "home", we use type="lemma" for "go":
cqlArr=list(
list(type="lemma", item="go", freq="once"),
list(type="word", item="home", freq="once"))</p></li>
</ul><p>This matches all utterances containing:
"go home"
"goes home"
"went home"
"going home"</p><ul><li><p>To find all instances of a subject pronoun, followd by any form of "go", followed by one or more adverbs, followed by "home":
cqlArr=list(
list(type="pos", item="pro:sub", freq="once"),
list(type="lemma", item="go", freq="once"),
list(type="pos", item="adv", freq="onePlus"),
list(type="word", item="home", freq="once"))</p></li>
</ul><p>This matches all utterances containing:
"they went back home"
"they go back home"
"he went back home"
"we went back home"
others...</p>
<p>There are many "item" values for part of speech (type="pos").  See the CHAT manual or the CQL tab on TalkBankDB (https://talkbank.org/DB) for legal part-of-speech codes.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">getCQL</span><span class="op">(</span>
  cqlArr <span class="op">=</span> <span class="cn">NULL</span>,
  corpusName <span class="op">=</span> <span class="cn">NULL</span>,
  corpora <span class="op">=</span> <span class="cn">NULL</span>,
  lang <span class="op">=</span> <span class="cn">NULL</span>,
  media <span class="op">=</span> <span class="cn">NULL</span>,
  age <span class="op">=</span> <span class="cn">NULL</span>,
  gender <span class="op">=</span> <span class="cn">NULL</span>,
  designType <span class="op">=</span> <span class="cn">NULL</span>,
  activityType <span class="op">=</span> <span class="cn">NULL</span>,
  groupType <span class="op">=</span> <span class="cn">NULL</span>,
  auth <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>cqlArr</dt>
<dd><p>Query by grammatical pattern.
For example, to search for all utterances where a speaker says "go" once followed by adverb occuring one or more times: cqlArr=list(list(type="word", item="go", freq="once"), list(type="pos", item="adv", freq="onePlus")).
Legal values for type are: "word" to match exact word, "lemma" to match all forms of a word, "pos" to match parts of speech.
Legal values for item are any word, word lemma, or part of speech code (see CHAT manual or the CQL tab on TalkBankDB (https://talkbank.org/DB) for legal part-of-speech codes).
Legal values for freq are "once", "onePlus", and "zeroPlus".</p></dd>
<dt>corpusName</dt>
<dd><p>Name of corpus to query.  For example, to search within the childes corpus, corpus="childes".</p></dd>
<dt>corpora</dt>
<dd><p>Name of corpus/corporas to query.  This is a path starting with the corpus name followed by subfolder names leading to a folder for which all transcripts beneath it will be queried.  For example, to query all transcripts in the MacWhinney childes corpus: corpora = c('childes', 'Eng-NA', 'MacWhinney').</p></dd>
<dt>lang</dt>
<dd><p>Query by language For example, to get transcripts that contain both English and Spanish: lang=c("eng", "spa"). Legal values: 3-letter language codes based on the ISO 639-3 standard.</p></dd>
<dt>media</dt>
<dd><p>Query by media type.  For example, to get transcripts with an associated video recording: media=c("video").  Legal values: "audio" or "video".</p></dd>
<dt>age</dt>
<dd><p>Query by participant month age range.  For example, to get transcripts with target participants who are 14-18 months old: age=c(from="3", to="12").</p></dd>
<dt>gender</dt>
<dd><p>Query by participant gender. For example, to get transcripts with female target participants: gender=c("female").  Legal values: "female" or "male".</p></dd>
<dt>designType</dt>
<dd><p>Query by design type.  For example, to get transcripts from a longitudinal study: designType=c("long")  Legal values are "long" for longitudinal studies, "cross" for cross-sectional studies.</p></dd>
<dt>activityType</dt>
<dd><p>Query by activity type.  For example, to get transcripts where the target participant is engaged in toy play: activityType=c("toyplay").  See the CHAT manual for legal values.</p></dd>
<dt>groupType</dt>
<dd><p>Query by group type.   For example, to get transcripts where the target participant is hearing limited: groupType=c("HL").  See the CHAT manual for legal values.</p></dd>
<dt>auth</dt>
<dd><p>Determine if user should be prompted to authenticate in order to access protected collections. Defaults to False.</p></dd>
</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu">getCQL</span><span class="op">(</span>cqlArr<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type<span class="op">=</span><span class="st">"lemma"</span>, item<span class="op">=</span><span class="st">"my"</span>, freq<span class="op">=</span><span class="st">"once"</span><span class="op">)</span>,</span>
<span class="r-in">                   <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type<span class="op">=</span><span class="st">"lemma"</span>, item<span class="op">=</span><span class="st">"ball"</span>, freq<span class="op">=</span><span class="st">"once"</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">       corpusName <span class="op">=</span> <span class="st">'childes'</span>,</span>
<span class="r-in">       corpora <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'childes'</span>, <span class="st">'Eng-NA'</span>, <span class="st">'MacWhinney'</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Fetching data, please wait..."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Success!"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            role monthage                             docID uid who</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  Target_Child       30  childes/Eng-NA/MacWhinney/020627  23 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  Target_Child       36 childes/Eng-NA/MacWhinney/030018b  85 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Target_Child       44  childes/Eng-NA/MacWhinney/030805 147 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Target_Child       40  childes/Eng-NA/MacWhinney/030429 373 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Target_Child       40  childes/Eng-NA/MacWhinney/030429 373 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Target_Child       40  childes/Eng-NA/MacWhinney/030429 373 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Target_Child       40  childes/Eng-NA/MacWhinney/030429 373 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Target_Child       41  childes/Eng-NA/MacWhinney/030512   6 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Target_Child       41  childes/Eng-NA/MacWhinney/030512   6 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Target_Child       41  childes/Eng-NA/MacWhinney/030512   6 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Target_Child       41  childes/Eng-NA/MacWhinney/030512   6 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Target_Child       41 childes/Eng-NA/MacWhinney/030526a 249 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 Target_Child       41 childes/Eng-NA/MacWhinney/030526a 249 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 Target_Child       41 childes/Eng-NA/MacWhinney/030526a 249 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 Target_Child       41 childes/Eng-NA/MacWhinney/030526a 249 CHI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                  utt filename</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                         I hafta get &lt;&lt; my ball &gt;&gt;    020627</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                        but I forgot &lt;&lt; my ball &gt;&gt;   030018b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                      I magiced &lt;&lt; my ball &gt;&gt; away    030805</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  I threw &lt;&lt; my ball &gt;&gt; over that fence next doors    030429</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  I threw &lt;&lt; my ball &gt;&gt; over that fence next doors    030429</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  I threw &lt;&lt; my ball &gt;&gt; over that fence next doors    030429</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  I threw &lt;&lt; my ball &gt;&gt; over that fence next doors    030429</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         I throw &lt;&lt; my ball &gt;&gt; back to their house    030512</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         I throw &lt;&lt; my ball &gt;&gt; back to their house    030512</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        I throw &lt;&lt; my ball &gt;&gt; back to their house    030512</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        I throw &lt;&lt; my ball &gt;&gt; back to their house    030512</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12                   can he play with &lt;&lt; my ball &gt;&gt;   030526a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13                   can he play with &lt;&lt; my ball &gt;&gt;   030526a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14                   can he play with &lt;&lt; my ball &gt;&gt;   030526a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15                   can he play with &lt;&lt; my ball &gt;&gt;   030526a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                 path</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   childes/Eng-NA/MacWhinney/020627</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  childes/Eng-NA/MacWhinney/030018b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   childes/Eng-NA/MacWhinney/030805</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   childes/Eng-NA/MacWhinney/030429</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   childes/Eng-NA/MacWhinney/030429</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   childes/Eng-NA/MacWhinney/030429</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   childes/Eng-NA/MacWhinney/030429</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   childes/Eng-NA/MacWhinney/030512</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   childes/Eng-NA/MacWhinney/030512</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  childes/Eng-NA/MacWhinney/030512</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  childes/Eng-NA/MacWhinney/030512</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 childes/Eng-NA/MacWhinney/030526a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 childes/Eng-NA/MacWhinney/030526a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 childes/Eng-NA/MacWhinney/030526a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 childes/Eng-NA/MacWhinney/030526a</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by John Kowalski, Rob Cavanaugh.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

